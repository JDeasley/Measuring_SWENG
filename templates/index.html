<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    
    <script>
      function getRepo(scope){
        event.preventDefault()

        let repo = document.getElementById("repoSearch").value
        let new_url = '{{ url_for('show_repo', repo_name=repo) }}'.concat(repo)
        document.getElementById("loading").removeAttribute("hidden")
        window.location.href = new_url
        document.getElementById("loading").setAttribute("hidden")
      }
    </script>
    
    <title>Flask Example</title>
</head>
<body>
    <nav class="navbar navbar-light" style="background-color: #d8d8d8;">
        <div class="container-fluid">
          <ol class="breadcrumb">
            <li class="breadcrumb-item active" aria-current="page">Home</li>
          </ol>
          <form class="d-flex" id="form" onsubmit="return getRepo()">
            <input class="form-control me-2" type="text" placeholder="Search Repo" aria-label="Search" id="repoSearch" value="">
            <button class="btn btn-outline-success" type="submit">Search</button>
          </form>
        </div>
      </nav>
      <div id="loading" hidden>
        <div class="d-flex justify-content-center" style="margin-top: 4em;">
          <div id="loader" class="spinner-border ml-auto" role="status" aria-hidden="true"></div>
        </div>
        <p id="load_text" style="text-align: center; margin-top: 1em;">Loading...</p>
        <p id="load_text" style="text-align: center; margin-top: 1em;">This may take a few minutes, depending on the number of contributors to the repo and the number of commits that each user has made to all repos.</p>
        <hr>
      </div>

      <div class="container" style="margin-top: 2em; margin-bottom: 2em;">
        <h1 class="display-4">
          Measuring Software Engineering
        </h1>
        <hr>
        <h3 style="margin-bottom: 1em;">
          Do top contributors spread their time across languages, or do they focus in on one language?
        </h3>
        <p>
          The point of this app is to visualise the language usage of contributors to a Github repo of your choosing.
          This is done by fetching data from the Github API v3, specifically using the "Events" API for getting a user's commits over the last <b>90 days</b>,
          and from there checking the file extension of each file they have committed.
          <br/>
          This data is collected for the <b>top 5 contributors</b> to the repo you have chosen.
          It should be noted that, although the information is fetched and displayed by repository name, 
          the information shown is taken from across <b>all repositories</b> committed to by each of the users.
        </p>
        <p>
          The goal with showing this information is to make it apparent if top contributors achieve this level of impact by 
          making use of a lot of different languages with different strengths, or if they prefer to focus in on one language 
          and hone their skills in order to be more impactful in that way.
          Essentially, this is a question of <b>depth vs range</b> of language usage in order to assess which appears to be more impactful. 
        </p>
        <hr>
        <h3 style="margin-bottom: 1em;">
          Notes on known issues:
        </h3>
        <p>
          I have had a few issues with larger repos.
        </p>
        <p>
          First of all, the Github API does not allow fetching of contributors in very large repos, 
          such as the "torvalds/linux" repo. This prevents me from showing data for the top contributors to repos of that size.
        </p>
        <p>
          Also, where a repo's top contributors have made a very large colume of commits to different repos, causing long loading times, 
          the web app does not seem to display the pie charts. However, I can see from logs that the requested data is acquired and passed into charts, 
          but Google Charts simply do not appear. I would of course like to fix this, but if you are reading this then it is likely I haven't been able to just yet. 
          In the meantime, I can only recommend trying to visualise smaller repos, unless you are willing to check server logs to see that the data is in fact there.
        </p>
        <p>
          A few public repos which I have tested and can recommend are:
            <ul>
              <li>twbs/bootstrap</li>
              <li>d3/d3 - 1 min 30 secs</li>
              <li>facebook/react - 3 mins 15 secs</li>
              <li>python/cpython - 4 mins 45 secs</li>
            </ul>
        </p>
      </div>
      
</body>